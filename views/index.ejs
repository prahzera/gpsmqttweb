<!DOCTYPE html>
<html>

<head>
  <title>Dashboard</title> <!-- T铆tulo de la p谩gina -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- Enlace a la hoja de estilo de Leaflet -->
  <link rel="stylesheet" href="/css/index.css"> <!-- Enlace a la hoja de estilo personalizada -->
</head>

<body>
  <div class="header">
    <img src="/images/logo.png" alt="Logo">
    <a href="/logout" class="logout-button">Cerrar sesi贸n</a> <!-- Bot贸n de cierre de sesi贸n -->
    <button id="dark-mode-toggle" class="dark-mode-toggle"></button> <!-- Bot贸n para alternar el modo oscuro -->
  </div>

  <div class="controls-container"> <!-- Contenedor para los controles -->
    <div class="controls"> <!-- Secci贸n para los controles de selecci贸n -->
      <label for="timeRange">Ver historial de:</label> <!-- Etiqueta para el selector de tiempo -->
      <select id="timeRange"> <!-- Selector de intervalo de tiempo -->
        <option value="1440">ltimas 24 horas</option> <!-- Opci贸n para ver el historial de las 煤ltimas 24 horas -->
        <option value="720">ltimas 12 horas</option> <!-- Opci贸n para ver el historial de las 煤ltimas 12 horas -->
        <option value="180">ltimas 3 horas</option> <!-- Opci贸n para ver el historial de las 煤ltimas 3 horas -->
        <option value="60">ltima hora</option> <!-- Opci贸n para ver el historial de la 煤ltima hora -->
        <option value="30">ltimos 30 minutos</option> <!-- Opci贸n para ver el historial de los 煤ltimos 30 minutos -->
        <option value="15">ltimos 15 minutos</option> <!-- Opci贸n para ver el historial de los 煤ltimos 15 minutos -->
        <option value="10">ltimos 10 minutos</option> <!-- Opci贸n para ver el historial de los 煤ltimos 10 minutos -->
        <option value="5">ltimos 5 minutos</option> <!-- Opci贸n para ver el historial de los 煤ltimos 5 minutos -->
      </select>
    </div>

    <div class="distance-summary"> <!-- Secci贸n para mostrar el resumen de la distancia recorrida -->
      <p>Distancia recorrida en el intervalo seleccionado: <span id="distance-current">
          <%= totalDistance ? totalDistance.toFixed(2) : '0' %> km
            <!-- Muestra la distancia recorrida en el intervalo seleccionado, con un valor por defecto de 0 km si no hay datos -->
        </span></p>
    </div>
  </div>

  <div class="map-container">
    <div id="map"></div> <!-- Contenedor para el mapa -->
  </div>


  <div class="distance-resume"> <!-- Secci贸n para mostrar el resumen de distancias -->
    <p>Distancia recorrida hoy: <span id="distance-day">
        <%= dailyDistances[new Date().toISOString().split('T')[0]] ? dailyDistances[new
          Date().toISOString().split('T')[0]].toFixed(2) : '0' %> km
          <!-- Muestra la distancia recorrida hoy, basada en las distancias diarias -->
      </span></p>
    <p>Distancia recorrida esta semana: <span id="distance-week">
        <%= Object.values(dailyDistances).reduce((a, b)=> a + b, 0).toFixed(2) %> km
          <!-- Suma las distancias diarias para mostrar la distancia recorrida en la semana -->
      </span></p>
    <p>Distancia recorrida este mes: <span id="distance-month">
        <%= Object.values(monthlyDistances).reduce((a, b)=> a + b, 0).toFixed(2) %> km
          <!-- Suma las distancias mensuales para mostrar la distancia recorrida en el mes -->
      </span></p>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Enlace al script de Leaflet para crear el mapa -->
  <script src="/socket.io/socket.io.js"></script>
  <!-- Enlace al script de Socket.IO para la comunicaci贸n en tiempo real -->
  <script src="/js/script.js"></script> <!-- Enlace al script personalizado para manejar la l贸gica del mapa -->
  <script src="/js/night.js"></script> <!-- Enlace al script para manejar el modo oscuro -->
</body>

</html>